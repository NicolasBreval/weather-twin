services:
  node1:
    build:
      context: .
      dockerfile: ./Dockerfile
    tty: true
    restart: always
    environment:
      - IP_ADDR=192.168.255.1
    networks:
      - mesh-net
    privileged: true
    volumes:
      - /lib/modules:/lib/modules:ro
      - /sys:/sys:ro

  node2:
    build:
      context: .
      dockerfile: ./Dockerfile
    tty: true
    restart: always
    environment:
      - IP_ADDR=192.168.255.2
    networks:
      - mesh-net
    privileged: true
    volumes:
      - /lib/modules:/lib/modules:ro
      - /sys:/sys:ro

networks:
  mesh-net:
    driver: bridge